<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Leni Glow Era</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family: Arial;
  background: linear-gradient(to bottom,#ffd6eb,#fff0f7);
}
header{
  background:#ff4fa3;
  padding:18px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
  color:white;
}
nav{
  display:flex;
  justify-content:space-around;
  background:#ffc6e3;
  padding:10px;
}
nav button{
  background:white;
  border:none;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
}
.section{display:none;padding:20px;}
.active{display:block;}
.card{
  background:white;
  padding:15px;
  border-radius:14px;
  margin-bottom:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
}
input{
  width:100%;
  margin-top:5px;
  padding:6px;
  border-radius:8px;
  border:1px solid #eee;
}
button.save{
  background:#ff4fa3;
  color:white;
  border:none;
  padding:8px;
  border-radius:8px;
  margin-top:8px;
  cursor:pointer;
}
.small{
  font-size:14px;
  margin-bottom:5px;
}
</style>
</head>

<body>

<header>âœ¨ Leni Glow Era âœ¨</header>

<nav>
  <button onclick="show('progress')">ðŸ“Š</button>
</nav>

<div id="progress" class="section active">

  <div class="card">
    <h3>Logg mÃ¥linger</h3>
    <input type="number" id="weight" placeholder="Vekt (kg)">
    <input type="number" id="waist" placeholder="Midje (cm)">
    <input type="number" id="lift" placeholder="Tyngste lÃ¸ft (kg)">
    <button class="save" onclick="saveProgress()">Lagre mÃ¥ling</button>
  </div>

  <div class="card">
    <canvas id="chart"></canvas>
  </div>

  <div class="card">
    <h3>Historikk</h3>
    <div id="history"></div>
  </div>

</div>

<script>

function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

let chartInstance = null;
let data = JSON.parse(localStorage.getItem("progress")) || [];

function saveProgress(){

  const weightVal = document.getElementById("weight").value;
  const waistVal = document.getElementById("waist").value;
  const liftVal = document.getElementById("lift").value;

  if(!weightVal && !waistVal && !liftVal) return;

  const entry = {
    date: new Date().toLocaleDateString(),
    weight: weightVal ? parseFloat(weightVal) : null,
    waist: waistVal ? parseFloat(waistVal) : null,
    lift: liftVal ? parseFloat(liftVal) : null
  };

  data.push(entry);
  localStorage.setItem("progress", JSON.stringify(data));

  document.getElementById("weight").value="";
  document.getElementById("waist").value="";
  document.getElementById("lift").value="";

  drawChart();
  drawHistory();
}

function drawChart(){

  const liftData = data.filter(d => d.lift !== null);

  if(chartInstance){
    chartInstance.destroy();
  }

  if(liftData.length === 0){
    return;
  }

  const ctx = document.getElementById("chart").getContext("2d");

  chartInstance = new Chart(ctx,{
    type:'line',
    data:{
      labels: liftData.map(d=>d.date),
      datasets:[{
        label:"LÃ¸ft progresjon (kg)",
        data: liftData.map(d=>d.lift),
        borderColor:"#ff4fa3",
        fill:false,
        tension:0.3
      }]
    },
    options:{
      responsive:true,
      scales:{
        y:{
          beginAtZero:false
        }
      }
    }
  });
}

function drawHistory(){

  const historyDiv = document.getElementById("history");
  historyDiv.innerHTML="";

  data.slice().reverse().forEach(d=>{

    let text = d.date + " | ";

    if(d.weight !== null){
      text += "Vekt: " + d.weight + " kg ";
    }
    if(d.waist !== null){
      text += "Midje: " + d.waist + " cm ";
    }
    if(d.lift !== null){
      text += "Lift: " + d.lift + " kg ";
    }

    const line = document.createElement("div");
    line.className="small";
    line.innerText = text;

    historyDiv.appendChild(line);
  });
}

drawChart();
drawHistory();

</script>

</body>
</html>
